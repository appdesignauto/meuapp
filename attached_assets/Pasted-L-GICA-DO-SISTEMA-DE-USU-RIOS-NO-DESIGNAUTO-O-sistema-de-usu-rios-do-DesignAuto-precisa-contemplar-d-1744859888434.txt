L√ìGICA DO SISTEMA DE USU√ÅRIOS NO DESIGNAUTO
O sistema de usu√°rios do DesignAuto precisa contemplar diferentes perfis com diferentes formas de acesso e controle de expira√ß√£o. A l√≥gica deve ser estruturada para funcionar com integra√ß√£o autom√°tica com a Hotmart (via webhook) e tamb√©m com inser√ß√µes manuais de usu√°rios diretamente pelo administrador da plataforma.

üë§ 1. TIPOS DE USU√ÅRIOS
a) Visitante (n√£o logado)
Pode visualizar algumas artes p√∫blicas.

N√£o possui conta cadastrada.

nivel_acesso = visitante

b) Usu√°rio logado (sem plano)
Tem conta criada, mas sem plano ativo.

Pode visualizar artes limitadas, sem download.

nivel_acesso = usuario

c) Usu√°rio assinante (via Hotmart)
Acessa todos os recursos (downloads, links, favoritos).

O acesso √© gerenciado por webhook da Hotmart.

Pode ter plano mensal ou anual.

nivel_acesso = premium

origem_assinatura = hotmart

tipo_plano = mensal | anual

data_assinatura e data_expiracao devem ser preenchidos com base no plano.

Ao expirar, o sistema deve automaticamente rebaixar para nivel_acesso = usuario.

d) Usu√°rio manual (inserido pelo administrador)
Criado quando o cliente paga diretamente fora da Hotmart.

Pode receber:

Um plano com data personalizada de expira√ß√£o.

Ou um acesso vital√≠cio.

origem_assinatura = manual

tipo_plano = personalizado | vitalicio

acesso_vitalicio = true/false

O sistema deve verificar data_expiracao e, caso expire, rebaixar para usuario.

e) Perfis administrativos (sem prazo)
Incluem: designer, designer_adm, suporte, admin

Esses perfis n√£o expiram. O campo acesso_vitalicio deve ser true ou data_expiracao ser null.

üß† 2. ESTRUTURA DE BANCO DE DADOS (TABELA USU√ÅRIOS)
A tabela de usu√°rios deve conter os seguintes campos:

id (chave prim√°ria)

nome

email

senha_hash

nivel_acesso (visitante, usuario, premium, suporte, designer, designer_adm, admin)

origem_assinatura (hotmart, manual, nenhuma)

tipo_plano (mensal, anual, personalizado, vitalicio)

data_assinatura

data_expiracao

acesso_vitalicio (booleano)

ultimo_login

criado_em

atualizado_em

observacao_admin (anota√ß√µes internas do administrador)

üîÅ 3. COMPORTAMENTO DA INTEGRA√á√ÉO COM A HOTMART
Quando a Hotmart enviar um webhook de compra/ativa√ß√£o:

Se o usu√°rio j√° existe, o sistema deve:

atualizar o nivel_acesso para premium

preencher tipo_plano, data_assinatura, data_expiracao

marcar origem_assinatura = hotmart

Se o usu√°rio n√£o existe, criar com os dados acima.

Quando a Hotmart enviar um webhook de cancelamento ou expira√ß√£o:

O sistema deve rebaixar o usu√°rio para usuario

Remover data_assinatura, data_expiracao, tipo_plano

üîß 4. INSER√á√ÉO MANUAL DE USU√ÅRIOS PELO ADMIN
No painel administrativo, o admin poder√°:

Criar um novo usu√°rio manualmente

Escolher o plano:

Mensal (expira em 30 dias)

Anual (expira em 365 dias)

Vital√≠cio (n√£o expira)

Personalizado (escolhe a data final no calend√°rio)

O sistema deve preencher os campos corretamente:

nivel_acesso = premium

origem_assinatura = manual

tipo_plano conforme selecionado

Se for vital√≠cio, marca acesso_vitalicio = true

Se for personalizado, grava a data_expiracao manualmente

‚è≥ 5. L√ìGICA DE EXPIRA√á√ÉO AUTOM√ÅTICA
O sistema deve rodar um verificador (cron ou a cada login) que:

Ignora usu√°rios com acesso_vitalicio = true

Para os demais:

Se data_expiracao estiver ultrapassada, rebaixa o nivel_acesso para usuario

Zera os campos data_assinatura, tipo_plano, data_expiracao, origem_assinatura

‚úÖ 6. FORMUL√ÅRIO NO PAINEL ADMINISTRATIVO
Na tela de cria√ß√£o/edi√ß√£o de usu√°rio, o painel deve permitir:

Nome

E-mail

N√≠vel de Acesso

Origem da Assinatura

Tipo de Plano:

‚òê Mensal (30 dias)

‚òê Anual (365 dias)

‚òê Vital√≠cio (sem expira√ß√£o)

‚òê Personalizado (escolhe data de expira√ß√£o)

Campo de calend√°rio (se personalizado)

Checkbox Acesso Vital√≠cio

Campo de Observa√ß√£o

üéØ OBJETIVO FINAL
Com essa estrutura:

O sistema ser√° compat√≠vel com Hotmart

Permitir√° controle total sobre inser√ß√µes manuais

Automatiza o downgrade de usu√°rios expirados

Garante que perfis administrativos tenham acesso vital√≠cio

Evita qualquer falha na gest√£o de permiss√µes e expira√ß√£o